<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SciBox Interview - –°–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ</title>
    <script src="https://www.google.com/recaptcha/api.js?render=6LeNDRksAAAAAFpfLym3unGOmDpGMqTZybb_6QA1"></script>
    <link rel="stylesheet" href="../static/css/styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">SciBox Interview</div>
            <div class="header-controls">
                <div class="progress-container">
                    <div class="progress-info">
                        <span>–ü—Ä–æ–≥—Ä–µ—Å—Å: </span>
                        <span id="progressText">0/? –∑–∞–¥–∞—á</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                    <div class="timer" id="timer">45:00</div>
                </div>
                <button class="btn btn-danger" onclick="endInterview()">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
            </div>
        </header>

        <div class="interview-container">
            <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –ó–∞–¥–∞—á–∞ -->
            <div class="problem-panel">
                <div class="panel-tabs">
                    <div class="tab active" data-tab="task">–ó–∞–¥–∞—á–∞</div>
                    <div class="tab" data-tab="examples">–ü—Ä–∏–º–µ—Ä—ã</div>
                </div>
                <div class="panel-content">
                    <!-- –í–∫–ª–∞–¥–∫–∞ "–ó–∞–¥–∞—á–∞" -->
                    <div class="tab-content active" id="task-tab">
                        <div class="problem-content">
                            {% if error %}
                                <div class="error-message" style="color: #EF4444; padding: 20px; background: #FEE2E2; border-radius: 8px; margin-bottom: 20px;">
                                    <h3>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á–∏</h3>
                                    <p>{{ error }}</p>
                                </div>
                            {% elif task %}
                                <h3>{{ task.get('title', task.get('id', '–ó–∞–¥–∞—á–∞')) }}</h3>
                                <div class="task-description">
                                    <p style="white-space: pre-wrap;">{{ task.get('description', '–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç') }}</p>
                                </div>
                                {% if task.get('constraints') %}
                                    <div class="task-constraints" style="margin-top: 15px; padding: 10px; background: #F3F4F6; border-radius: 6px;">
                                        <strong>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:</strong>
                                        <p style="white-space: pre-wrap;">{{ task.get('constraints') }}</p>
                                    </div>
                                {% endif %}
                            {% else %}
                                <h3>–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á–∏...</h3>
                                <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ, –∑–∞–¥–∞—á–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è...</p>
                            {% endif %}
                        </div>
                        {% if task and task.get('id') %}
                            <button class="btn btn-primary run-tests-btn" data-task-id="{{ task.get('id') }}" onclick="runTests()">
                                –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
                            </button>
                        {% else %}
                            <button class="btn btn-primary run-tests-btn" data-task-id="" onclick="runTests()" disabled>
                                –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
                            </button>
                        {% endif %}
                    </div>
                    
                    <!-- –í–∫–ª–∞–¥–∫–∞ "–ü—Ä–∏–º–µ—Ä—ã" -->
                    <div class="tab-content" id="examples-tab" style="display: none;">
                        <div class="problem-content">
                            {% if task and task.get('test_cases') %}
                                <h4>–í—Å–µ –ø—Ä–∏–º–µ—Ä—ã –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞:</h4>
                                {% for test_case in task.get('test_cases', []) %}
                                    <div style="margin-bottom: 20px; padding: 15px; background: #1F2937; color: #F9FAFB; border-radius: 6px; font-family: monospace;">
                                        <div style="margin-bottom: 10px; padding-bottom: 8px; border-bottom: 1px solid #374151;">
                                            <strong style="color: #9CA3AF;">–ü—Ä–∏–º–µ—Ä {{ loop.index }}:</strong>
                                        </div>
                                        <div style="margin-bottom: 8px;">
                                            <strong style="color: #60A5FA;">–í–≤–æ–¥:</strong>
                                            <pre style="margin: 5px 0; white-space: pre-wrap; background: #111827; padding: 8px; border-radius: 4px;">{{ test_case.get('input', '') }}</pre>
                                        </div>
                                        <div>
                                            <strong style="color: #34D399;">–í—ã–≤–æ–¥:</strong>
                                            <pre style="margin: 5px 0; white-space: pre-wrap; background: #111827; padding: 8px; border-radius: 4px;">{{ test_case.get('output', '') }}</pre>
                                        </div>
                                    </div>
                                {% endfor %}
                            {% elif task %}
                                <p>–ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</p>
                            {% else %}
                                <p>–ó–∞–¥–∞—á–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å - –†–µ–¥–∞–∫—Ç–æ—Ä -->
            <div class="editor-panel">
                <div class="editor-header">
                    <select class="language-select">
                        <option value="python">Python</option>
                        <option value="go">Go</option>
                        <option value="java">Java</option>
                        <option value="cpp">C++</option>
                    </select>
                </div>
                <div class="editor-area">
                    <textarea class="code-editor" placeholder="// –ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –∫–æ–¥ –∑–¥–µ—Å—å...">
// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞
function solution() {
    return true;
}
                    </textarea>
                </div>
                <div class="console-panel">
                    <div class="console-content" id="consoleOutput">> –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å...</div>
                </div>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - –ß–∞—Ç -->
            <div class="chat-panel">
                <div class="chat-header">
                    AI –ò–Ω—Ç–µ—Ä–≤—å—é–µ—Ä
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div class="message message-ai">
                        –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –≤–∞—à AI-–∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä. –ù–∞—á–Ω–µ–º —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ...
                    </div>
                </div>
                <div class="chat-input-container">
                    <input type="text" class="chat-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                    <button class="btn btn-primary send-btn" onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ -->
    <div id="timeUpModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-icon">‚è∞</div>
            <h2>–í—Ä–µ–º—è –≤—ã—à–ª–æ!</h2>
            <p>–°–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è...</p>
            <div class="modal-progress">
                <div class="modal-progress-bar">
                    <div class="modal-progress-fill"></div>
                </div>
                <span class="modal-countdown">–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑: <span id="redirectCountdown">5</span>—Å</span>
            </div>
            <button class="btn btn-primary" onclick="redirectNow()">–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º</button>
        </div>
    </div>

    <script>
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        let timerInterval;
        let totalTime = 45 * 60; // 45 –º–∏–Ω—É—Ç –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
        let timeLeft = totalTime;
        
        // –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∑–∞–¥–∞—á–∞–º
        let totalTasks = 4; // –í—Å–µ–≥–æ –∑–∞–¥–∞—á –≤ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏
        let completedTasks = 0; // –†–µ—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
        let currentTaskProgress = 0; // –ü—Ä–æ–≥—Ä–µ—Å—Å —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏ (0-100%)

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            startTimer();
            updateProgressBar();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º task_id –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ runTests()
            const runTestsBtn = document.querySelector('.run-tests-btn');
            if (runTestsBtn && runTestsBtn.dataset.taskId) {
                window.currentTaskId = runTestsBtn.dataset.taskId;
            }
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
            const tabs = document.querySelectorAll('.panel-tabs .tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.dataset.tab;
                    
                    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–æ–∫
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.style.display = 'none';
                        content.classList.remove('active');
                    });
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
                    const targetTab = document.getElementById(tabName + '-tab');
                    if (targetTab) {
                        targetTab.style.display = 'block';
                        targetTab.classList.add('active');
                    }
                });
            });
        });

        // –§—É–Ω–∫—Ü–∏–∏ —Ç–∞–π–º–µ—Ä–∞
        function startTimer() {
            updateTimerDisplay();
            
            timerInterval = setInterval(function() {
                timeLeft--;
                updateTimerDisplay();
                
                // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –ø—Ä–∏ –º–∞–ª–æ–º –≤—Ä–µ–º–µ–Ω–∏
                const timerElement = document.getElementById('timer');
                if (timeLeft <= 300) { // 5 –º–∏–Ω—É—Ç
                    timerElement.style.color = '#EF4444';
                    if (timeLeft <= 60) {
                        timerElement.style.animation = 'pulse 1s infinite';
                    }
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    showTimeUpModal();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–¥–∞—á
        function updateProgressBar() {
            // –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å = –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ + –ø—Ä–æ–≥—Ä–µ—Å—Å —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏
            const overallProgress = (completedTasks / totalTasks) * 100 + 
                                  (currentTaskProgress / totalTasks);
            
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            
            progressFill.style.width = Math.min(overallProgress, 100) + '%';
            progressText.textContent = `${completedTasks}/${totalTasks} –∑–∞–¥–∞—á`;
            
            // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            if (overallProgress >= 75) {
                progressFill.style.background = 'linear-gradient(90deg, #00E5A8, #00AAE5)';
            } else if (overallProgress >= 50) {
                progressFill.style.background = 'linear-gradient(90deg, #F59E0B, #00AAE5)';
            } else {
                progressFill.style.background = 'linear-gradient(90deg, #00AAE5, #0090C5)';
            }
        }

        function completeTask() {
            completedTasks++;
            currentTaskProgress = 0;
            updateProgressBar();
            
            // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —á–∞—Ç
            addMessage(`–ó–∞–¥–∞—á–∞ ${completedTasks} –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–π...`, 'ai');
            
            // –ï—Å–ª–∏ –≤—Å–µ –∑–∞–¥–∞—á–∏ —Ä–µ—à–µ–Ω—ã
            if (completedTasks >= totalTasks) {
                setTimeout(() => {
                    addMessage('–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –í—ã —Ä–µ—à–∏–ª–∏ –≤—Å–µ –∑–∞–¥–∞—á–∏ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è.', 'ai');
                    setTimeout(() => {
                        endInterviewSuccess();
                    }, 2000);
                }, 1000);
            }
        }

        function updateTaskProgress(progress) {
            currentTaskProgress = progress;
            updateProgressBar();
        }

        function endInterviewSuccess() {
            clearInterval(timerInterval);
            alert('–í—Å–µ –∑–∞–¥–∞—á–∏ —Ä–µ—à–µ–Ω—ã! –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º...');
            window.location.href = 'results';
        }

        // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        function showTimeUpModal() {
            const modal = document.getElementById('timeUpModal');
            modal.style.display = 'flex';
            
            let countdown = 5;
            const countdownElement = document.getElementById('redirectCountdown');
            
            const countdownInterval = setInterval(() => {
                countdownElement.textContent = countdown;
                if (countdown-- <= 0) {
                    clearInterval(countdownInterval);
                    redirectToResults();
                }
            }, 1000);
        }

        function redirectNow() {
            redirectToResults();
        }

        function redirectToResults() {
            window.location.href = 'results';
        }

        // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏...
        function sendMessage() {
            const input = document.querySelector('.chat-input');
            const message = input.value.trim();
            if (message) {
                addMessage(message, 'user');
                input.value = '';
                
                // –ó–∞–≥–ª—É—à–∫–∞ –æ—Ç–≤–µ—Ç–∞ AI
                setTimeout(() => {
                    addMessage('–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∞—à –æ—Ç–≤–µ—Ç! –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ä–∞–±–æ—Ç—É –Ω–∞–¥ –∑–∞–¥–∞—á–µ–π.', 'ai');
                }, 500);
            }
        }
        
        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageElement = document.createElement('div');
            messageElement.className = `message message-${sender}`;
            messageElement.textContent = text;
            messagesContainer.appendChild(messageElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        // –§—É–Ω–∫—Ü–∏—è runTests() –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ interview.js
        
        function endInterview() {
            if (confirm('–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ?')) {
                clearInterval(timerInterval);
                window.location.href = 'results';
            }
        }
    </script>
    <script src="/static/js/interview.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SciBox Interview - –°–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ</title>
    <link rel="stylesheet" href="../static/css/styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">SciBox Interview</div>
            <div class="header-controls">
                <div class="progress-container">
                    <div class="progress-info">
                        <span>–ü—Ä–æ–≥—Ä–µ—Å—Å: </span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                    <div class="timer" id="timer">45:00</div>
                </div>
                <button class="btn btn-danger" onclick="endInterview()">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
            </div>
        </header>

        <div class="interview-container">
            <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –ó–∞–¥–∞—á–∞ -->
            <div class="problem-panel">
                <div class="panel-tabs">
                    <div class="tab active">–ó–∞–¥–∞—á–∞</div>
                </div>
                <div class="panel-content">
                    <div class="problem-content">
                        <h3>–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</h3>
                        <p>–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∑–¥–µ—Å—å...</p>
                        <div class="code-block">
                            –ü—Ä–∏–º–µ—Ä –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ –±—É–¥–µ—Ç –∑–¥–µ—Å—å...
                        </div>
                    </div>
                    <button class="btn btn-primary run-tests-btn" onclick="runTests()">
                        –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
                    </button>
                </div>
            </div>

            <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å - –†–µ–¥–∞–∫—Ç–æ—Ä -->
            <div class="editor-panel">
                <div class="editor-header">
        <!-- –ö–∞—Å—Ç–æ–º–Ω—ã–π dropdown -->
        <div class="custom-dropdown" id="languageDropdown">
            <div class="dropdown-selected" id="dropdownSelected">
                <span class="selected-text">Python</span>
                <div class="dropdown-arrow"></div>
            </div>
            <div class="dropdown-options">
                <div class="dropdown-option" data-value="python">Python</div>
                <div class="dropdown-option" data-value="javascript">JavaScript</div>
                <div class="dropdown-option" data-value="java">Java</div>
                <div class="dropdown-option" data-value="cpp">C++</div>
            </div>
        </div>
    </div>
                <div class="editor-area">
                    <textarea class="code-editor" placeholder="// –ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –∫–æ–¥ –∑–¥–µ—Å—å...">
// –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞
function solution() {
    return true;
}
                    </textarea>
                </div>
                <div class="console-panel">
                    <div class="console-content" id="consoleOutput">> –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å...</div>
                </div>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - –ß–∞—Ç -->
            <div class="chat-panel">
                <div class="chat-header">
                    AI –ò–Ω—Ç–µ—Ä–≤—å—é–µ—Ä
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div class="message message-ai">
                        –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –≤–∞—à AI-–∏–Ω—Ç–µ—Ä–≤—å—é–µ—Ä. –ù–∞—á–Ω–µ–º —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ...
                    </div>
                </div>
                <div class="chat-input-container">
                    <input type="text" class="chat-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                    <button class="btn btn-primary send-btn" onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ -->
    <div id="timeUpModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-icon">‚è∞</div>
            <h2>–í—Ä–µ–º—è –≤—ã—à–ª–æ!</h2>
            <p>–°–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è...</p>
            <div class="modal-progress">
                <div class="modal-progress-bar">
                    <div class="modal-progress-fill"></div>
                </div>
                <span class="modal-countdown">–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑: <span id="redirectCountdown">5</span>—Å</span>
            </div>
            <button class="btn btn-primary" onclick="redirectNow()">–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º</button>
        </div>
    </div>
    <script src="/static/js/interview.js"></script>
   <script>
    // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    let timerInterval;
    let totalTime = 45 * 60; // 45 –º–∏–Ω—É—Ç –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    let timeLeft = totalTime;

    // –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∑–∞–¥–∞—á–∞–º
    let totalTasks = 4; // –í—Å–µ–≥–æ –∑–∞–¥–∞—á –≤ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏
    let completedTasks = 0; // –†–µ—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
    let currentTaskProgress = 0; // –ü—Ä–æ–≥—Ä–µ—Å—Å —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏ (0-100%)

    // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function() {
        startTimer();
        updateProgressBar();
        initLanguageDropdown();
    });

    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ dropdown
    function initLanguageDropdown() {
        const dropdown = document.getElementById('languageDropdown');
        const selected = document.getElementById('dropdownSelected');
        const options = dropdown.querySelector('.dropdown-options');
        const arrow = dropdown.querySelector('.dropdown-arrow');

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
        selected.addEventListener('click', function(e) {
            e.stopPropagation();
            const isActive = selected.classList.contains('active');

            // –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ dropdown
            closeAllDropdowns();

            if (!isActive) {
                selected.classList.add('active');
                options.classList.add('show');
                arrow.classList.add('rotated');
                createDropdownOverlay();
            }
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –æ–ø—Ü–∏–π
        const optionElements = options.querySelectorAll('.dropdown-option');
        optionElements.forEach(option => {
            option.addEventListener('click', function() {
                const value = this.getAttribute('data-value');
                const text = this.textContent;

                // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
                selected.querySelector('.selected-text').textContent = text;

                // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ –≤ dropdown
                updateLanguageSelection(value);

                // –ó–∞–∫—Ä—ã–≤–∞–µ–º dropdown
                closeDropdown();
            });
        });
    }

    function createDropdownOverlay() {
        const overlay = document.createElement('div');
        overlay.className = 'dropdown-overlay';
        overlay.style.display = 'block';
        document.body.appendChild(overlay);

        overlay.addEventListener('click', closeAllDropdowns);
    }

    function closeDropdown() {
        const dropdown = document.getElementById('languageDropdown');
        const selected = document.getElementById('dropdownSelected');
        const options = dropdown.querySelector('.dropdown-options');
        const arrow = dropdown.querySelector('.dropdown-arrow');

        selected.classList.remove('active');
        options.classList.remove('show');
        arrow.classList.remove('rotated');

        // –£–¥–∞–ª—è–µ–º overlay
        const overlay = document.querySelector('.dropdown-overlay');
        if (overlay) {
            overlay.remove();
        }
    }

    function closeAllDropdowns() {
        closeDropdown();
    }

    function updateLanguageSelection(selectedValue) {
        const options = document.querySelectorAll('.dropdown-option');
        options.forEach(option => {
            option.classList.remove('selected');
            if (option.getAttribute('data-value') === selectedValue) {
                option.classList.add('selected');
            }
        });
    }

    // –§—É–Ω–∫—Ü–∏–∏ —Ç–∞–π–º–µ—Ä–∞
    function startTimer() {
        updateTimerDisplay();

        timerInterval = setInterval(function() {
            timeLeft--;
            updateTimerDisplay();

            // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –ø—Ä–∏ –º–∞–ª–æ–º –≤—Ä–µ–º–µ–Ω–∏
            const timerElement = document.getElementById('timer');
            if (timeLeft <= 300) { // 5 –º–∏–Ω—É—Ç
                timerElement.style.color = '#EF4444';
                if (timeLeft <= 60) {
                    timerElement.style.animation = 'pulse 1s infinite';
                }
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                showTimeUpModal();
            }
        }, 1000);
    }

    function updateTimerDisplay() {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        document.getElementById('timer').textContent =
            `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    // –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–¥–∞—á
    function updateProgressBar() {
        // –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å = –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ + –ø—Ä–æ–≥—Ä–µ—Å—Å —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏
        const overallProgress = (completedTasks / totalTasks) * 100 +
                              (currentTaskProgress / totalTasks);

        const progressFill = document.getElementById('progressFill');

        progressFill.style.width = Math.min(overallProgress, 100) + '%';

        // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        if (overallProgress >= 75) {
            progressFill.style.background = 'linear-gradient(90deg, #00E5A8, #00AAE5)';
        } else if (overallProgress >= 50) {
            progressFill.style.background = 'linear-gradient(90deg, #F59E0B, #00AAE5)';
        } else {
            progressFill.style.background = 'linear-gradient(90deg, #00AAE5, #0090C5)';
        }
    }

    function completeTask() {
        completedTasks++;
        currentTaskProgress = 0;
        updateProgressBar();

        // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —á–∞—Ç
        addMessage(`–ó–∞–¥–∞—á–∞ ${completedTasks} –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–π...`, 'ai');

        // –ï—Å–ª–∏ –≤—Å–µ –∑–∞–¥–∞—á–∏ —Ä–µ—à–µ–Ω—ã
        if (completedTasks >= totalTasks) {
            setTimeout(() => {
                addMessage('–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –í—ã —Ä–µ—à–∏–ª–∏ –≤—Å–µ –∑–∞–¥–∞—á–∏ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏—è.', 'ai');
                setTimeout(() => {
                    endInterviewSuccess();
                }, 2000);
            }, 1000);
        }
    }

    function updateTaskProgress(progress) {
        currentTaskProgress = progress;
        updateProgressBar();
    }

    function endInterviewSuccess() {
        clearInterval(timerInterval);
        alert('–í—Å–µ –∑–∞–¥–∞—á–∏ —Ä–µ—à–µ–Ω—ã! –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º...');
        window.location.href = 'results';
    }

    // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    function showTimeUpModal() {
        const modal = document.getElementById('timeUpModal');
        modal.style.display = 'flex';

        let countdown = 5;
        const countdownElement = document.getElementById('redirectCountdown');

        const countdownInterval = setInterval(() => {
            countdownElement.textContent = countdown;
            if (countdown-- <= 0) {
                clearInterval(countdownInterval);
                redirectToResults();
            }
        }, 1000);
    }

    function redirectNow() {
        redirectToResults();
    }

    function redirectToResults() {
        window.location.href = 'results';
    }

    // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏...
    

    function addMessage(text, sender) {
        const messagesContainer = document.getElementById('chatMessages');
        const messageElement = document.createElement('div');
        messageElement.className = `message message-${sender}`;
        messageElement.textContent = text;
        messagesContainer.appendChild(messageElement);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    function runTests() {
        const consoleOutput = document.getElementById('consoleOutput');
        consoleOutput.innerHTML = '> –¢–µ—Å—Ç—ã –∑–∞–ø—É—â–µ–Ω—ã...\n> ‚úì –¢–µ—Å—Ç 1 –ø—Ä–æ–π–¥–µ–Ω\n> ‚úì –¢–µ—Å—Ç 2 –ø—Ä–æ–π–¥–µ–Ω\n> ‚úó –¢–µ—Å—Ç 3 –Ω–µ –ø—Ä–æ–π–¥–µ–Ω\n\n> –ü—Ä–æ–π–¥–µ–Ω–æ: 2/3 —Ç–µ—Å—Ç–æ–≤';

        // –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ - –±—ç–∫–µ–Ω–¥ –∑–∞–º–µ–Ω–∏—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        setTimeout(() => {
            // –ï—Å–ª–∏ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã - –∑–∞–¥–∞—á–∞ —Ä–µ—à–µ–Ω–∞
            const allTestsPassed = Math.random() > 0.5; // –ó–∞–≥–ª—É—à–∫–∞

            if (allTestsPassed) {
                consoleOutput.innerHTML += '\n\n> üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã! –ó–∞–¥–∞—á–∞ —Ä–µ—à–µ–Ω–∞.';
                updateTaskProgress(100);
                setTimeout(() => {
                    completeTask();
                }, 1000);
            } else {
                consoleOutput.innerHTML += '\n\n> ‚ùå –ù–µ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ä–∞–±–æ—Ç—É.';
                updateTaskProgress(50); // –ß–∞—Å—Ç–∏—á–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å
            }
        }, 2000);
    }

    function endInterview() {
        if (confirm('–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ?')) {
            clearInterval(timerInterval);
            window.location.href = 'results';
        }
    }
</script>

</body>
</html>







